<!DOCTYPE html>
<head>
    <link rel="icon" type="image/x-icon" href="images/favicon.png">
    <title>Flight Booking Website</title>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Oxygen:wght@300;400;700&display=swap');

        * {
        	font-family: Oxygen;
        	user-select: none;
        }

        body {
        	background-color: rgb(238, 245, 255);
        }

        input {
        	width: 300px;
        	height: 40px;
        	font-size: 14px;
        	border: none;
        	border-bottom: 1px solid lightgrey;
        	outline: none;
        }

        input:focus {
        	border-bottom: 1px solid #3b9cff;
        }

        button {
        	color: #3b9cff;
            font-weight: 700;
        	width: 150px;
        	height: 40px;
        	border: 2px solid #3b9cff;
        	border-radius: 20px;
        	font-size: 16px;
        	background-color: transparent;
            transition: background-color .2s, color .2s;
        }

        button:hover {
        	outline: none;
        	cursor: pointer;
        	background-color: #5eaeff;
        	color: white;

        }

        button:active {
        	outline: none;
        	background-color: #3198ff;
        }
        
        .break_60 {
            width: 100%;
            height: 60px;
        }
        
        .banner {
            width: 100%;
            height: 140px;
            background: linear-gradient(129deg, rgba(43,25,242,1) 37%, rgba(59,156,255,1) 49%, rgba(12,17,255,1) 100%);
            
        	box-shadow: 0 0 10px rgba(0, 0, 0, 0.5);
            
        	display: flex;
        	justify-content: center;
        	flex-flow: row;
        	align-items: center;
        }
        
        .break_60 input {
            width: 40px;
            border: none;
        }
                
        .flightInfoBar {
            position: absolute;
        	display: flex;
        	justify-content: space-between;
        	flex-flow: row;
        	align-items: center;
            
        	background-color: rgb(238, 245, 255);
            
        	box-shadow: 0 0 15px rgba(0, 0, 0, 0.5);
            
            border-radius: 50px;
            height: 60px;
            width: 1200px;
        }
        
        .flightInfoBar div:not(:first-child) {
        	display: flex;
        	justify-content: center;
        	flex-flow: row;
        	align-items: center;
            
            width: 200px;
            height: 100%;
            border-radius: 50px;
        }
        
        .activeBar {
            width: 460px;
            height: 100%;
            border-radius: 50px;
            position: absolute;
            background: linear-gradient(129deg, rgba(43,25,242,1) 0%, rgba(59,156,255,1) 100%);
            box-shadow: 0 0 5px rgba(43,25,242,1);
        }
        
        .infoBarText {
            font-weight: 700;
        }
        
        .infoBarText a {
            padding-left: 6%;
        }
        
        .infoBarTextActive {
            font-weight: 700;
            color: white;
            filter: brightness(0) invert(1);
        }
        
        .infoBarTextActive a {
            padding-left: 6%;
        }
        
        .infoBarTextActive img {
            filter: brightness(0) invert(1);
        }
        
        .title {
            padding-top: 20px;
            text-align: center;
            font-size: 40px;
        }
        
        .content {
        	display: flex;
        	justify-content: center;
        	flex-flow: column;
        }
        
        .departingFlight {
            width: 1200px;
        	display: flex;
        	justify-content: center;
        	flex-flow: column;
            align-self: center;
        }
        
        .returnFlight {
            width: 1200px;
        	display: flex;
        	justify-content: center;
        	flex-flow: column;
            align-self: center;
        }
        
        .baggageSelector {
            width: 100%;
        	display: flex;
        	justify-content: center;
        	flex-flow: row;
            align-self: center;
        }
        
        .baggageSelector div{
            width: 220px;
            height: 240px;
            background-color: white;
            border-radius: 5px;
        	box-shadow: 0 0 5px rgba(0, 0, 0, 0.2);
            transition: box-shadow .2s;
            cursor: pointer;
            
        	display: flex;
        	justify-content: flex-end;
        	flex-flow: column;
            align-self: center;
            
            text-align: center;
        }
        
        .baggageSelector div:not(:first-child) {
            margin-left: 25px;
        }
        
        .baggageSelector div:hover{
        	box-shadow: 0 0 10px rgba(0, 0, 0, 0.5);
        }
        
        .baggageSelector div:active{
        	box-shadow: 0 0 10px rgba(49, 152, 255, 0.75);
        }
        
        .baggageSelector div img {
            margin-left: auto;
            margin-right: auto;
            width: 30px;
            opacity: 0.6;
        }
        
        .baggageSelector div a {
            line-height: 40px;
            height: 40px;
            font-weight: 700;
        }
        
        .baggageSelector div a:first-of-type {
            color: black;
            font-size: 30px;
        }
        
        .baggageSelector div a {
            font-size: 20px;
            color: #3198ff;
        }
        
        .baggageSelector div img:last-child {
            opacity: 0.3;
            width: 25px;
            margin-bottom: 20px;
        }
        
        .baggageSelector div:nth-child(3) img:first-child {
            width: 18px;
        }
        
        
        #submitButton {
            font-weight: 700;
        	font-size: 20px;
        	width: 180px;
        	height: 50px;
            margin-top: 10px;
            margin-bottom: 20px;
            align-self: center;
        }
        
    </style>
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <script>
        
        var activeUser = JSON.parse(localStorage.getItem('currentUser'));
        var currentSearch = JSON.parse(sessionStorage.getItem('searchFlight'));
        
        function setup(){
            if (currentSearch == null){
                window.location = "index.html";
            }
            else{
                var depDate = document.getElementById("depDate");
                var tempDate = new Date(currentSearch.departureDate);
                var tempDateString = tempDate.toLocaleDateString('default', {weekday: 'long'});
                tempDateString += " " + tempDate.toLocaleDateString('default', {day: 'numeric'});
                tempDateString += " " + tempDate.toLocaleDateString('default', {month: 'long'});
                tempDateString += " " + tempDate.toLocaleDateString('default', {year: 'numeric'});
                depDate.innerHTML = tempDateString;
                
                var depToArr = document.getElementById("depToArr");
                depToArr.innerHTML = "<b>" + currentSearch.departureLocation + " to " + currentSearch.arrivalLocation + "</b>";      
                var arrToDep = document.getElementById("arrToDep");
                depToArr.innerHTML = "<b>" + currentSearch.arrivalLocation + " to " + currentSearch.departureLocation + "</b>";                 
                
                // If return flight
                if (currentSearch.returnDate != null){
                    var arrDate = document.getElementById("arrDate");
                    tempDate = new Date(currentSearch.returnDate);
                    tempDateString = tempDate.toLocaleDateString('default', {weekday: 'long'});
                    tempDateString += " " + tempDate.toLocaleDateString('default', {day: 'numeric'});
                    tempDateString += " " + tempDate.toLocaleDateString('default', {month: 'long'});
                    tempDateString += " " + tempDate.toLocaleDateString('default', {year: 'numeric'});
                    arrDate.innerHTML = tempDateString;
                }
                else{
                    document.getElementById("returnFlight").style.display = "none";
                }
                
                $('.bSDepart > div').click(function(){
                    $('.bSDepart > div').css("box-shadow", "0 0 5px rgba(0, 0, 0, 0.2)");
                    $('.bSDepart > div').css("outline", "none");
                    $(this).css('box-shadow', "0 0 10px rgba(49, 152, 255, 1)");
                    $(this).css('outline', "2px solid rgba(49, 152, 255, 1)");
                });
                $('.bSReturn > div').click(function(){
                    $('.bSReturn > div').css("box-shadow", "0 0 5px rgba(0, 0, 0, 0.2)");
                    $('.bSReturn > div').css("outline", "none");
                    $(this).css('box-shadow', "0 0 10px rgba(49, 152, 255, 1)");
                    $(this).css('outline', "2px solid rgba(49, 152, 255, 1)");
                });
            }
        }
        
        function selectBaggageDep(weight, price){
            console.log("Weight: " + weight + "kg\nPrice: $" + price);
            
            currentSearch.departureFlight.baggageWeight = weight;
            currentSearch.departureFlight.baggagePrice = price;
            console.log(currentSearch);
        }
        
        function selectBaggageRet(weight, price){
            console.log("Weight: " + weight + "kg\nPrice: $" + price);
            
            currentSearch.returnFlight.baggageWeight = weight;
            currentSearch.returnFlight.baggagePrice = price;
            console.log(currentSearch);
        }
        
        function submitFlightSelection(){
            if (currentSearch.returnFlight != null){
                currentSearch.totalPrice += (currentSearch.departureFlight.baggagePrice + currentSearch.returnFlight.baggagePrice);
            }
            else{
                currentSearch.totalPrice += currentSearch.departureFlight.baggagePrice;
            }
            
            sessionStorage.setItem('searchFlight', JSON.stringify(currentSearch));
            console.log(currentSearch);
            console.log("continue");
        }
    </script>
</head>

<body onload="setup()">
    <div class="break_60">
        <input type="image" src="images/favicon.png" onClick='window.location = "index.html";'/>
    </div>
    <div class="banner">
        <div class="flightInfoBar">
            <div class="activeBar">
            </div>
            <div class="infoBarTextActive">
                <img src="images/planeside.png" height="25px"/>
                <a>Flights</a>
            </div>
            <div class="infoBarTextActive">
                <img src="images/briefcase.png" height="25px"/>
                <a>Baggage</a>
            </div>
            <div class="infoBarText">
                <img src="images/seat.png" height="25px"/>
                <a>Seats</a>
            </div>
            <div class="infoBarText">
                <img src="images/user.png" height="25px"/>
                <a>Booking Details</a>
            </div>
            <div class="infoBarText">
                <img src="images/dollar.png" height="25px"/>
                <a>Review & Pay</a>
            </div>
        </div>
    </div>
    <h3 class="title" id="title">Baggage</h3>
    
    <div class="content">
        <div class="break_60"></div>
        <div class="departingFlight">
            <h2>Departing Flight</h2>
            <h3 id="depToArr">Departure to Arrival</h3>
            <h4 id="depDate">Day Date Month Year</h4>
            <br>
            <h2>Checked Baggage</h2>
            <a>Checked baggage must be checked in before you go to the gate, and will not be carried onto the aircraft.</a>
            <br>
            <div class="baggageSelector bSDepart">
                <div onClick="selectBaggageDep(0,0)">
                    <img src="images/baggageSelector_None.png" width="40px"/>
                    <br>
                    <a>0 kg</a>
                    <a></a>
                    <br>
                    <img id="" src="images/radioButtonOff.png"/>
                </div>
                <div onClick="selectBaggageDep(15,25)">
                    <img src="images/baggageSelector_Small.png" width="40px"/>
                    <br>
                    <a>15 kg</a>
                    <a>$25 pp</a>
                    <br>
                    <img id="" src="images/radioButtonOff.png"/>
                </div>
                <div onClick="selectBaggageDep(20,27)">
                    <img src="images/baggageSelector_Medium.png" width="40px"/>
                    <br>
                    <a>20 kg</a>
                    <a>$27 pp</a>
                    <br>
                    <img id="" src="images/radioButtonOff.png"/>
                </div>
                <div onClick="selectBaggageDep(30,41)">
                    <img src="images/baggageSelector_Large.png" width="40px"/>
                    <br>
                    <a>30 kg</a>
                    <a>$41 pp</a>
                    <br>
                    <img id="" src="images/radioButtonOff.png"/>
                </div>
                <div onClick="selectBaggageDep(40,54)">
                    <img src="images/baggageSelector_ExtraLarge.png" width="40px"/>
                    <br>
                    <a>40 kg</a>
                    <a>$54 pp</a>
                    <br>
                    <img id="" src="images/radioButtonOff.png"/>
                </div>
            </div>
        </div>
        
        <div class="break_60"></div>
        
        <div class="returnFlight" id="returnFlight">
            <h2>Returning Flight</h2>
            <h3 id="arrToDep">Arrival to Departure</h3>
            <h4 id="arrDate">Day Date Month Year</h4>
            <br>
            <h2>Checked Baggage</h2>
            <a>Checked baggage must be checked in before you go to the gate, and will not be carried onto the aircraft.</a>
            <br>
            <div class="baggageSelector bSReturn">
                <div onClick="selectBaggageRet(0,0)">
                    <img src="images/baggageSelector_None.png" width="40px"/>
                    <br>
                    <a>0 kg</a>
                    <a></a>
                    <br>
                    <img id="" src="images/radioButtonOff.png"/>
                </div>
                <div onClick="selectBaggageRet(15,25)">
                    <img src="images/baggageSelector_Small.png" width="40px"/>
                    <br>
                    <a>15 kg</a>
                    <a>$25 pp</a>
                    <br>
                    <img id="" src="images/radioButtonOff.png"/>
                </div>
                <div onClick="selectBaggageRet(20,27)">
                    <img src="images/baggageSelector_Medium.png" width="40px"/>
                    <br>
                    <a>20 kg</a>
                    <a>$27 pp</a>
                    <br>
                    <img id="" src="images/radioButtonOff.png"/>
                </div>
                <div onClick="selectBaggageRet(30,41)">
                    <img src="images/baggageSelector_Large.png" width="40px"/>
                    <br>
                    <a>30 kg</a>
                    <a>$41 pp</a>
                    <br>
                    <img id="" src="images/radioButtonOff.png"/>
                </div>
                <div onClick="selectBaggageRet(40,54)">
                    <img src="images/baggageSelector_ExtraLarge.png" width="40px"/>
                    <br>
                    <a>40 kg</a>
                    <a>$54 pp</a>
                    <br>
                    <img id="" src="images/radioButtonOff.png"/>
                </div>
            </div>
        </div>
        <button id="submitButton" onClick="submitFlightSelection()">Continue</button>
    </div>
</body>